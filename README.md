# Bug-Records
记录一下遇见过的问题bug

一.
问题：玩家进行装备重铸的时候， 出现报错，无法进行战力刷新。玩家在下线之后，服务端实体释放之后，玩家再重新登录，无法登录，登录报错。
定位：逻辑是战力刷新函数中，遍历各个装备位置上的属性id， 通过属性id查找配置中的属性字段配置。报错是在遍历属性配置的时候报错了。所以定位到问题是配置找不到记录的属性id。
bug排查：1。检查配置，配置正常没有遗漏id。2.检查开发版本的代码和分支代码，代码一致。3.业务逻辑代码检查，发现在进行装备重铸的时候，该位置没有数据会进行初始化设置默认数据，然后在接下来的业务逻辑中，有一些拦截判断会执行return（判断到读取不到配置或者消耗不足时），当触发了拦截，该位置的属性id会默认为0（没有执行成功随机属性id，故id依旧为默认数据0）. 属性配置中没有属性id为0的配置，所以当进行战力刷新时，读取不到配置就报错了。
解决方式：优化业务逻辑代码（初始没有数据并且没有成功执行重铸的数据，不记录数据， 应当使用临时数据处理业务逻辑）以及战力刷新函数添加配置为空的判断。
